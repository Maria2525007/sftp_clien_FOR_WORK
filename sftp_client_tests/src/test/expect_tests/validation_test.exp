#!/usr/bin/expect -f

spawn java -jar sftp_client-1.0-SNAPSHOT.jar

# Подключение
expect "Введите хост:" { send "172.19.60.50\r" }
expect "Введите порт:" { send "22\r" }
expect "Введите логин:" { send "sftp_user\r" }
expect "Введите пароль:" { send "test123\r" }

# Тест дубликата
send "4\r"
expect "Введите домен:"
send "existing.domain\r"
expect "Введите IP:"
send "10.0.0.1\r"
expect "Добавлено успешно"
send "4\r"
expect "Введите домен:"
send "existing.domain\r"
expect "Введите IP:"
send "10.0.0.1\r"
expect "Ошибка: Домен уже существует"

# Тест некорректного IP
send "4\r"
expect "Введите домен:"
send "new.domain\r"
expect "Введите IP:"
send "invalid_ip\r"
expect "Некорректный IP"

# Тест некорректного домена
send "4\r"
expect "Введите домен:"
send "-invalid.domain\r"
expect "Некорректный домен"

# Тест удаления несуществующей записи
send "5\r"
expect "Введите домен/IP:"
send "nonexistent.domain\r"
expect "Запись не найдена"